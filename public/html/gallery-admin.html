<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="google" content="notranslate">
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Gallery Management Dashboard</title>
  <!-- <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css"/> -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
  <!-- Changed CSS link -->
  <link rel="stylesheet" href="../css/gallery-admin.css">
  <link rel="stylesheet" href="../css/common-header.css">
  <!-- Add the browser-image-compression library -->
  <script src="https://cdn.jsdelivr.net/npm/browser-image-compression@2.0.2/dist/browser-image-compression.js"></script> 
  <!-- Make sure this is BEFORE your gallery_admin.js script if not using modules properly -->
</head>
<body>
  <div class="header-container">
    <!-- Replace previous back button with this one -->
    <button type="button" class="header-back-button" onclick="window.location.href='admin-adhr.html';">Back</button>
    
    <div class="header-title">Gallery Management Dashboard</div> 
    
    <!-- Logo last -->
    <div class="company-logo">
      <img src="../assets/logo.png" class="auth-logo" alt="Logo"/>
    </div>
  </div>
  
  <main>
    <!-- Removed container div -->
    <h2>Gallery Management</h2>

    <!-- Removed content-card class -->
    <div id="album-management">
        <!-- Removed redundant h4 -->

        <!-- Create New Album Form - Wrapped in content-section -->
        <div class="content-section" id="create-album-content-section"> <!-- <<< ADD THIS ID -->
            <div class="admin-form" id="create-album-section">
            <h4>Create New Album</h4>
            <form id="create-album-form">
                <div class="form-group">
                    <label for="album-category">Category:</label>
                    <select id="album-category" name="category" required>
                        <option value="" disabled selected>Select a Category</option>
                        <option value="Life At Swanson">Life At Swanson</option>
                        <option value="Our Achievements">Our Achievements</option>
                        <option value="Machinery">Machinery</option>
                        <option value="Infrastructure">Infrastructure</option>
                        <option value="Testing & Quality Labs">Testing & Quality Labs</option>
                        <option value="Corporate Events & Visits">Corporate Events & Visits</option>
                        <option value="People & Teams">People & Teams</option>
                        <option value="Environment & Safety">Environment & Safety</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="album-name">Album Name:</label>
                    <input type="text" id="album-name" name="album_name" required>
                </div>
                <div class="form-group">
                    <label for="album-description">Album Description (Optional):</label>
                    <textarea id="album-description" name="album_description"></textarea>
                </div>
                <div class="form-actions">
                    <button type="submit" class="btn btn-primary">Create Album</button>
                </div>
            </form>
            </div>
        </div>

        <hr>

        <!-- Existing Albums List - Wrapped in content-section -->
        <div class="content-section" id="existing-albums-content-section"> <!-- <<< Optional: Add ID here too for consistency -->
            <div id="existing-albums-section">
            <h4>Existing Albums</h4>
            <div id="existing-albums-list">
                <p>Loading albums...</p>
                <!-- Album list will be populated here by JS -->
            </div>
        </div>

        <!-- Image Management Section (Initially Hidden) -->
        <div id="image-management" style="display: none;">
            <hr>
            <h4>Manage Images for <span id="image-management-album-name"></span></h4>
            
            <!-- Placeholder for Image Upload Form -->
            <div id="upload-image-section">
                <h5>Upload New Image</h5>
                <form id="upload-image-form" class="mb-3">
                    <div class="form-group">
                        <label for="image-file">Select Image(s):</label>
                        <input type="file" class="form-control-file" id="image-file" name="image-file" accept="image/*" multiple>
                    </div>
                    <!-- ADD THIS SECTION FOR CAPTION -->
                    <div class="form-group">
                        <label for="image-caption">Caption (optional):</label>
                        <input type="text" class="form-control" id="image-caption" name="image-caption" placeholder="Enter a caption for the image(s)">
                        <small class="form-text text-muted">If uploading multiple images, this caption will be applied to all of them in this batch.</small>
                    </div>
                    <!-- END ADD CAPTION SECTION -->
                    <button type="submit" class="btn btn-primary">Upload Image(s)</button>
                </form>
            </div>

            <hr>

            <!-- Container for Existing Images -->
            <h5>Existing Images</h5>
            <div id="existing-images-list" class="image-grid">
                <p>Loading images...</p>
                <!-- Image list will be populated here -->
            </div>

            <button id="back-to-albums" class="btn">Back to Albums</button>
        </div>
    </div>

    <!-- Add this Edit Album Modal structure -->
    <!-- Edit Album Modal -->
    <div id="edit-album-modal" class="modal" style="display: none;">
        <div class="modal-content">
            <span class="close-button" id="cancel-edit-album-btn">&times;</span>
            <h4>Edit Album Details</h4>
            <form id="edit-album-form">
                <input type="hidden" id="edit-album-id" name="album_id">
                
                <div class="form-group">
                    <label for="edit-album-category">Category:</label>
                    <select id="edit-album-category" name="category" required>
                        <option value="" disabled>Select a Category</option>
                        <option value="Life At Swanson">Life At Swanson</option>
                        <option value="Our Achievements">Our Achievements</option>
                        <option value="Machinery">Machinery</option>
                        <option value="Infrastructure">Infrastructure</option>
                        <option value="Testing & Quality Labs">Testing & Quality Labs</option>
                        <option value="Corporate Events & Visits">Corporate Events & Visits</option>
                        <option value="People & Teams">People & Teams</option>
                        <option value="Environment & Safety">Environment & Safety</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="edit-album-name">Album Name:</label>
                    <input type="text" id="edit-album-name" name="album_name" required>
                </div>
                <div class="form-group">
                    <label for="edit-album-description">Album Description (Optional):</label>
                    <textarea id="edit-album-description" name="album_description"></textarea>
                </div>
                <div class="form-actions">
                    <button type="submit" class="btn btn-primary">Save Changes</button>
                    <!-- The close button above also acts as cancel -->
                </div>
            </form>
        </div>
    </div>

</main>

  <!-- Link to the new JS file -->
  <script type="module" src="../js/gallery-admin.js"></script> 
</body>
</html>
