<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Monthly Reconciliation Report</title>
    <link rel="icon" type="image/png" href="../assets/logo2.png">
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css" />
    <link rel="stylesheet" href="../css/employee-dashboard.css">
    <link rel="stylesheet" href="../css/common-header.css">
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@500&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Roboto', sans-serif;
            font-weight: 500;
            background-color: #f3f4f6 !important;
        }

        .page-fade-in {
            opacity: 1;
        }

        /* Table Styling matching your Consumption Page */
        table tbody tr {
            background-color: #ffffff;
            transition: background-color 0.2s ease;
            border-bottom: 1px solid #d1d5db;
        }

        table tbody tr:hover {
            background-color: #f8fafc;
        }

        table th {
            border-right: 1px solid #d1d5db;
            border-bottom: 1px solid #d1d5db;
        }

        table td {
            border-right: 1px solid #d1d5db;
            padding: 0.375rem;
            vertical-align: middle;
            font-size: 0.75rem;
            text-align: center;
        }

        table td:first-child {
            text-align: left;
            padding-left: 0.75rem;
        }

        /* Material Name Left Align */
        table td:last-child,
        table th:last-child {
            border-right: none;
        }

        table thead th {
            font-size: 0.65rem;
            padding: 0.35rem !important;
            line-height: 1.1;
        }

        table {
            border-right: 1px solid #d1d5db;
            border-collapse: collapse;
        }

        /* Sticky Header for better scrolling */
        #reconciliationTable thead th {
            position: sticky;
            top: 0;
            z-index: 10;
            box-shadow: 0 2px 2px -1px rgba(0, 0, 0, 0.4);
        }

        /* Fix container height for internal scrolling */
        .bg-white.rounded-md.shadow-sm.p-1.overflow-x-auto {
            max-height: 70vh;
            overflow-y: auto;
        }

        /* Reject Summary Specific Styling */
        .reject-card {
            background: white;
            border-radius: 8px;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
            padding: 1rem;
            height: 100%;
        }

        .reject-header-transfer {
            background-color: #064e3b !important;
        }

        /* Dark Green */
        .reject-header-issued {
            background-color: #78350f !important;
        }

        /* Dark Amber */

        .col-highlight-transfer {
            background-color: #ecfdf5 !important;
            color: #065f46 !important;
            font-weight: 700 !important;
        }

        .col-highlight-issued {
            background-color: #fffbeb !important;
            color: #92400e !important;
            font-weight: 700 !important;
        }

        /* Scrap Summary Specific Styling */
        .scrap-header-desc {
            background-color: #451a03 !important;
        }

        /* Dark Brown */
        .scrap-header-mc {
            background-color: #9a3412 !important;
        }

        /* Burnt Orange */
        .scrap-header-total {
            background-color: #7f1d1d !important;
        }

        /* Deep Red */
        .col-highlight-scrap {
            background-color: #fff7ed !important;
            color: #9a3412 !important;
            font-weight: 700 !important;
        }

        /* Main Table Specific Styling */
        .main-header-material {
            background-color: #232f3e !important;
        }

        .main-header-available {
            background-color: #1e3a8a !important;
        }

        .main-header-issued-used {
            background-color: #232f3e !important;
        }

        .main-header-loose {
            background-color: #c2410c !important;
        }

        .main-header-balance {
            background-color: #ca8a04 !important;
        }

        #reconciliationTable thead th {
            position: sticky;
            top: 0;
            z-index: 10;
            padding: 0.75rem 0.5rem !important;
            vertical-align: middle;
            border: 1px solid #4b5563 !important;
        }

        .col-highlight-available {
            background-color: #eff6ff !important;
            color: #1e3a8a !important;
            font-weight: 700 !important;
        }

        .col-highlight-loose {
            background-color: #fffaf5 !important;
            color: #c2410c !important;
        }

        .col-highlight-balance {
            background-color: #fefce8 !important;
            color: #854d0e !important;
            font-weight: 700 !important;
        }

        /* Row styling for main table */
        #reconciliationTable tbody tr td {
            border-bottom: 1px solid #d1d5db;
            border-right: 1px solid #d1d5db;
            padding: 0.5rem !important;
        }

        .col-highlight-loose {
            background-color: #fffaf5 !important;
            color: #c2410c !important;
        }

        .col-highlight-balance {
            background-color: #fefce8 !important;
            color: #854d0e !important;
            font-weight: 700 !important;
        }

        /* Rolls Summary Specific Styling */
        .rolls-header-desc {
            background-color: #232f3e !important;
        }

        .rolls-header-mc {
            background-color: #064e3b !important;
        }

        .rolls-header-total {
            background-color: #1e3a8a !important;
        }

        .col-highlight-rolls {
            background-color: #eff6ff !important;
            color: #1e3a8a !important;
            font-weight: 700 !important;
        }

        .summary-title {
            font-size: 1.1rem;
            font-weight: 800;
            color: #1f2937;
            margin-bottom: 0.75rem;
            padding-left: 0.5rem;
        }
    </style>
</head>

<body class="bg-white text-gray-900 font-roboto-medium h-screen overflow-hidden">
    <div class="header-container">
        <button type="button" class="header-back-button" onclick="window.history.back();">Back</button>
        <div class="header-title">Material Reconciliation Report</div>
        <div class="company-logo">
            <img src="../assets/logo.png" alt="Company Logo">
        </div>
    </div>

    <main class="flex-1 w-full h-full overflow-y-auto pt-16 md:pt-18 lg:pt-20 page-fade-in p-8">

        <div class="w-3/4 max-w-5xl mx-auto mb-4">
            <div class="bg-white rounded-lg shadow-sm p-4 flex flex-wrap items-center justify-between gap-4">

                <div class="flex items-center gap-3">
                    <div class="flex flex-col">
                        <label class="text-[10px] text-gray-500 font-bold uppercase">From Date</label>
                        <input type="date" id="fromDate"
                            class="border border-gray-300 rounded px-2 py-1 text-sm focus:outline-none focus:border-blue-500">
                    </div>
                    <div class="flex flex-col">
                        <label class="text-[10px] text-gray-500 font-bold uppercase">To Date</label>
                        <input type="date" id="toDate"
                            class="border border-gray-300 rounded px-2 py-1 text-sm focus:outline-none focus:border-blue-500">
                    </div>
                    <div class="flex flex-col">
                        <label class="text-[10px] text-gray-500 font-bold uppercase">Material Category</label>
                        <select id="materialCategory"
                            class="border border-gray-300 rounded px-2 py-1 text-sm focus:outline-none focus:border-blue-500">
                            <option value="raw">Raw Materials (Kgs)</option>
                            <option value="packing">Packing Materials (Nos)</option>
                            <option value="printing">Printing Materials (Kgs)</option>
                        </select>
                    </div>
                    <button id="generateBtn"
                        class="mt-3 px-3 py-1.5 bg-blue-600 text-white rounded text-xs hover:bg-blue-700 flex items-center gap-2 shadow-sm">
                        <i class="fas fa-sync-alt"></i> Generate Report
                    </button>
                </div>

                <div class="mt-3">
                    <button id="printBtn"
                        class="px-3 py-1.5 bg-gray-700 text-white rounded text-xs hover:bg-gray-800 flex items-center gap-2 shadow-sm">
                        <i class="fas fa-print"></i> Print / PDF
                    </button>
                </div>
            </div>
        </div>

        <div class="w-3/4 max-w-5xl mx-auto mb-10">
            <div class="reject-card">
                <h3 class="summary-title">Material Reconciliation</h3>
                <div class="overflow-x-auto">
                    <table id="reconciliationTable" class="min-w-full text-xs border-collapse border border-gray-300">
                        <thead>
                            <tr class="text-white font-bold uppercase tracking-wider text-center">
                                <th class="main-header-material py-2.5 px-3 border border-gray-300 w-64 text-left pl-3">
                                    NAME OF THE MATERIAL</th>
                                <th class="main-header-available py-2.5 px-3 border border-gray-300 w-28">
                                    TOTAL AVAILABLE (KGS)<br>
                                    <span class="text-[9px] font-normal">(OPENING + NEW ISSUES)</span>
                                </th>
                                <th class="main-header-issued-used py-2.5 px-3 border border-gray-300 w-24">ISSUED
                                    (KGS)<br><span class="text-[9px] font-normal">(SELECTED DATE)</span></th>
                                <th class="main-header-issued-used py-2.5 px-3 border border-gray-300 w-24">USED M/C 1
                                </th>
                                <th class="main-header-issued-used py-2.5 px-3 border border-gray-300 w-24">USED M/C 2
                                </th>
                                <th class="main-header-issued-used py-2.5 px-3 border border-gray-300 w-24">USED M/C 3
                                </th>
                                <th class="main-header-loose py-2.5 px-3 border border-gray-300 w-24">
                                    LOOSE M/C 1 (KGS)<br>
                                    <span class="text-[9px] font-normal text-orange-200">(UNPACKED)</span>
                                </th>
                                <th class="main-header-loose py-2.5 px-3 border border-gray-300 w-24">
                                    LOOSE M/C 2 (KGS)<br>
                                    <span class="text-[9px] font-normal text-orange-200">(UNPACKED)</span>
                                </th>
                                <th class="main-header-loose py-2.5 px-3 border border-gray-300 w-24">
                                    LOOSE M/C 3 (KGS)<br>
                                    <span class="text-[9px] font-normal text-orange-200">(UNPACKED)</span>
                                </th>
                                <th class="main-header-balance py-2.5 px-3 border border-gray-300 w-24 text-center">
                                    BALANCE (STORE) (KGS)</th>
                            </tr>
                        </thead>
                        <tbody id="reportBody">
                            <tr>
                                <td colspan="10" class="py-10 text-center text-gray-500">Select a month and click
                                    Generate to see the report.</td>
                            </tr>
                        </tbody>
                        <tfoot id="reportFooter" class="hidden font-bold bg-gray-100">
                        </tfoot>
                    </table>
                </div>
            </div>
        </div>

        <!-- Second Table: Scrap Summary -->
        <div class="w-3/4 max-w-5xl mx-auto mb-10">
            <div class="reject-card">
                <h3 class="summary-title">Scrap Summary</h3>

                <!-- Machine-Specific Table -->
                <div class="mb-8">
                    <h4 class="text-[10px] font-bold text-gray-500 uppercase tracking-widest mb-2 ml-1">Machine-Specific
                        Scrap</h4>
                    <div class="overflow-x-auto">
                        <table class="min-w-full text-xs border-collapse border border-gray-300">
                            <thead>
                                <tr class="text-white font-bold uppercase tracking-wider text-center">
                                    <th
                                        class="scrap-header-desc py-2.5 px-3 border border-gray-300 w-48 text-left pl-3">
                                        Scrap Type</th>
                                    <th class="scrap-header-mc py-2.5 px-3 border border-gray-300 w-24">M/C 1</th>
                                    <th class="scrap-header-mc py-2.5 px-3 border border-gray-300 w-24">M/C 2</th>
                                    <th class="scrap-header-mc py-2.5 px-3 border border-gray-300 w-24">M/C 3</th>
                                    <th class="scrap-header-total py-2.5 px-3 border border-gray-300 w-24 text-center">
                                        Total</th>
                                </tr>
                            </thead>
                            <tbody id="machineScrapBody">
                                <tr>
                                    <td colspan="5" class="py-10 text-center text-gray-500">Loading machine scrap...
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>

                <!-- Individual / Combined Table -->
                <div>
                    <h4 class="text-[10px] font-bold text-gray-500 uppercase tracking-widest mb-2 ml-1">Individual /
                        Combined Scrap</h4>
                    <div class="overflow-x-auto">
                        <table class="min-w-full text-xs border-collapse border border-gray-300">
                            <thead>
                                <tr class="text-white font-bold uppercase tracking-wider text-center">
                                    <th
                                        class="scrap-header-desc py-2.5 px-3 border border-gray-300 w-48 text-left pl-3">
                                        Scrap Type</th>
                                    <th colspan="3"
                                        class="scrap-header-mc py-2.5 px-3 border border-gray-300 text-center">Machine
                                        Allocation</th>
                                    <th class="scrap-header-total py-2.5 px-3 border border-gray-300 w-24 text-center">
                                        Total</th>
                                </tr>
                            </thead>
                            <tbody id="individualScrapBody">
                                <tr>
                                    <td colspan="5" class="py-10 text-center text-gray-500">Loading combined scrap...
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>

                <div id="scrapFooter" class="hidden"></div>
            </div>
        </div>

        <!-- Third Table: Rolls Summary -->
        <div class="w-3/4 max-w-5xl mx-auto mb-10">
            <div class="reject-card">
                <h3 class="summary-title">Rolls Summary</h3>
                <div class="overflow-x-auto">
                    <table id="rollsSummaryTable" class="min-w-full text-xs border-collapse border border-gray-300">
                        <thead>
                            <tr class="text-white font-bold uppercase tracking-wider text-center">
                                <th class="rolls-header-desc py-2.5 px-3 border border-gray-300 text-left pl-3">Machine
                                </th>
                                <th class="rolls-header-mc py-2.5 px-3 border border-gray-300 w-24">Accepted Rolls</th>
                                <th class="rolls-header-mc py-2.5 px-3 border border-gray-300 w-24">Accepted (Kgs)</th>
                                <th class="rolls-header-mc py-2.5 px-3 border border-gray-300 w-24">Produced Rolls</th>
                                <th class="rolls-header-mc py-2.5 px-3 border border-gray-300 w-24">Produced (Kgs)</th>
                                <th class="rolls-header-mc py-2.5 px-3 border border-gray-300 w-24">Rejected Rolls</th>
                                <th class="rolls-header-mc py-2.5 px-3 border border-gray-300 w-24">Rejected (Kgs)</th>
                                <th class="rolls-header-total py-2.5 px-3 border border-gray-300 w-24 text-center">Total
                                    (Kgs)</th>
                            </tr>
                        </thead>
                        <tbody id="rollsBody">
                            <tr>
                                <td colspan="8" class="py-10 text-center text-gray-500">Loading rolls data...</td>
                            </tr>
                        </tbody>
                        <tfoot id="rollsFooter" class="hidden font-bold bg-gray-100">
                        </tfoot>
                    </table>
                </div>
            </div>
        </div>

        <!-- Reject Roll Summaries Side-by-Side -->
        <div class="w-3/4 max-w-5xl mx-auto mb-10 grid grid-cols-1 md:grid-cols-2 gap-8">
            <!-- Fourth Table: Reject Roll Transfer Summary -->
            <div class="reject-card">
                <h3 class="summary-title">Reject Roll Transfer to Warehouse</h3>
                <div class="overflow-x-auto">
                    <table id="rejectTransferTable" class="min-w-full text-xs border-collapse border border-gray-300">
                        <thead>
                            <tr
                                class="reject-header-transfer text-white font-bold uppercase tracking-wider text-center">
                                <th class="py-2.5 px-3 border border-gray-300 text-left">Product</th>
                                <th class="py-2.5 px-3 border border-gray-300">Defect</th>
                                <th class="py-2.5 px-3 border border-gray-300 w-28">Total (Kgs)</th>
                            </tr>
                        </thead>
                        <tbody id="transferBody">
                            <tr>
                                <td colspan="3" class="py-8 text-center text-gray-500">Loading transfer data...</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>

            <!-- Fifth Table: Reject Roll Issued Summary -->
            <div class="reject-card">
                <h3 class="summary-title">Reject Roll Issued from Warehouse</h3>
                <div class="overflow-x-auto">
                    <table id="rejectIssuedTable" class="min-w-full text-xs border-collapse border border-gray-300">
                        <thead>
                            <tr class="reject-header-issued text-white font-bold uppercase tracking-wider text-center">
                                <th class="py-2.5 px-3 border border-gray-300 text-left">Product</th>
                                <th class="py-2.5 px-3 border border-gray-300">Defect</th>
                                <th class="py-2.5 px-3 border border-gray-300 w-28">Total (Kgs)</th>
                            </tr>
                        </thead>
                        <tbody id="issuedBody">
                            <tr>
                                <td colspan="3" class="py-8 text-center text-gray-500">Loading issued data...</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </main>

    <script type="module" src="../js/pd-monthly-reconciliation.js"></script>
</body>

</html>