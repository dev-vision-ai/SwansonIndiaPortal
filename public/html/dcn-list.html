<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title>Document Change Notification List</title>
    <link rel="icon" type="image/png" href="../assets/logo2.png">
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="../css/employee-dashboard.css">
    <link rel="stylesheet" href="../css/common-header.css">
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@500&display=swap" rel="stylesheet">
    <!-- Font Awesome for action icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
    <!-- Using native browser date input; Flatpickr removed -->
    <style>
        body {
            font-family: 'Roboto', sans-serif;
            font-weight: 500;
            padding-top: 70px; /* Space for fixed header */
        }
        html, body {
            overflow-y: auto;
        }

        /* DCC specific styling */
        .dcc-card {
            background: white;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
            padding: 1.5rem;
            margin-bottom: 1rem;
        }

        .dcc-button {
            background: #2563eb;
            color: white;
            padding: 0.5rem 1rem;
            border-radius: 6px;
            border: none;
            cursor: pointer;
            font-weight: 500;
            transition: background-color 0.2s;
        }

        .dcc-button:hover {
            background: #1d4ed8;
        }

        .dcc-button-secondary {
            background: #6b7280;
            color: white;
        }

        .dcc-button-secondary:hover {
            background: #4b5563;
        }

        .status-active {
            color: #059669;
            font-weight: 600;
        }

        .status-draft {
            color: #d97706;
            font-weight: 600;
        }

        .status-obsolete {
            color: #dc2626;
            font-weight: 600;
        }

        /* Action icons in the Action column */
        .action-icons { display:inline-flex; gap:0.5rem; align-items:center; justify-content:center; }
        .action-icons a, .action-icons button { display:inline-flex; align-items:center; justify-content:center; width:36px; height:30px; border-radius:6px; background:#f3f4f6; color:#374151; border:1px solid #e5e7eb; cursor:pointer; }
        .action-icons a:hover, .action-icons button:hover { background:#e6eef8; }
        .action-icons i { font-size:0.95rem; }
    </style>
</head>
<body class="bg-gray-100 text-gray-900 font-roboto-medium min-h-screen">
    <div class="header-container">
        <button type="button" class="header-back-button" onclick="(window.history.length > 1 ? window.history.back() : window.location.href='dcn-list.html')">Back</button>
        <div class="header-title">Document Change Notifications List (DCNs)</div>
        <div class="company-logo">
            <img src="../assets/logo.png" alt="Company Logo">
        </div>
    </div>

    <!-- Filter Section -->
    <div id="filterSection" class="w-full flex justify-center mt-4 mb-2" style="display: none;">
      <div id="filterContainer" class="bg-white rounded-lg shadow-md p-2">
        <div class="flex items-center justify-between mb-3">
          <div class="flex-1"></div>
          <h3 class="text-xs font-semibold text-gray-800 text-center flex-1">Find / Filter DCNs</h3>
                    <div class="flex items-center space-x-2 flex-1 justify-end">
                        <span class="text-sm text-gray-600">Filter Status:</span>
                        <span id="filterStatusIndicator" class="px-2 py-1 text-sm font-semibold rounded-full bg-gray-200 text-gray-700">
                            Off
                        </span>
                    </div>
        </div>
        <div class="flex flex-wrap items-end justify-center gap-2">
          <!-- Date Range -->
          <div class="flex flex-col items-center">
            <label class="block text-xs font-semibold text-gray-700 mb-0.5">From Date:</label>
            <input type="date" id="filterFromDate" class="w-24 h-6 px-1 text-xs border border-gray-300 rounded focus:outline-none focus:ring-[#002E7D] focus:border-[#002E7D]">
          </div>
          <div class="flex flex-col items-center">
            <label class="block text-xs font-semibold text-gray-700 mb-0.5">To Date:</label>
            <input type="date" id="filterToDate" class="w-24 h-6 px-1 text-xs border border-gray-300 rounded focus:outline-none focus:ring-[#002E7D] focus:border-[#002E7D]">
          </div>
          <!-- Requestor Department Filter -->
          <div class="flex flex-col items-center">
            <label class="block text-xs font-semibold text-gray-700 mb-0.5">Requestor Dept:</label>
            <select id="filterRequestorDept" class="w-28 h-6 px-1 text-xs border border-gray-300 rounded focus:outline-none focus:ring-[#002E7D] focus:border-[#002E7D] bg-white">
              <option value="">All</option>
            </select>
          </div>
          <!-- Document Type Filter -->
          <div class="flex flex-col items-center">
            <label class="block text-xs font-semibold text-gray-700 mb-0.5">Document Type:</label>
            <select id="filterDocumentType" class="w-28 h-6 px-1 text-xs border border-gray-300 rounded focus:outline-none focus:ring-[#002E7D] focus:border-[#002E7D] bg-white">
              <option value="">All</option>
            </select>
          </div>
          <!-- Status Filter -->
          <div class="flex flex-col items-center">
            <label class="block text-xs font-semibold text-gray-700 mb-0.5">Status:</label>
            <select id="filterStatus" class="w-24 h-6 px-1 text-xs border border-gray-300 rounded focus:outline-none focus:ring-[#002E7D] focus:border-[#002E7D] bg-white">
              <option value="">All</option>
              <option value="Draft">Draft</option>
              <option value="Under Review">Under Review</option>
              <option value="Approved">Approved</option>
              <option value="Rejected">Rejected</option>
            </select>
          </div>
          <!-- Requestor Name Filter -->
          <div class="flex flex-col items-center">
            <label class="block text-xs font-semibold text-gray-700 mb-0.5">Requestor Name:</label>
            <select id="filterRequestorName" class="w-32 h-6 px-1 text-xs border border-gray-300 rounded focus:outline-none focus:ring-[#002E7D] focus:border-[#002E7D] bg-white">
              <option value="">All</option>
            </select>
          </div>
          <!-- Filter Buttons -->
          <div class="flex flex-col items-center">
            <div class="h-4"></div> <!-- Spacer to align with inputs -->
            <div class="flex space-x-2">
              <button id="clearFilter" class="w-12 h-6 bg-gray-500 text-white text-xs font-semibold rounded hover:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-500 transition-colors duration-200">
                Clear
                </button>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="w-full flex justify-center mt-4">
        <div class="w-full overflow-x-auto">
            <table class="w-full bg-white shadow-md rounded table-fixed text-xs">
                    <thead>
                        <tr class="bg-[#232f3e] text-white font-bold uppercase tracking-wider text-center text-xs">
                            <th class="py-1 px-2 border-r border-gray-300 w-8 whitespace-normal break-words">Sr No</th>
                            <th class="py-1 px-2 border-r border-gray-300 w-16 whitespace-normal break-words">DCN No</th>
                            <th class="py-1 px-2 border-r border-gray-300 w-24 whitespace-normal break-words">Requestor Name</th>
                            <th class="py-1 px-2 border-r border-gray-300 w-20 whitespace-normal break-words">Requestor Dept</th>
                            <th class="py-1 px-2 border-r border-gray-300 w-36 whitespace-normal break-words">Document Name</th>
                            <th class="py-1 px-2 border-r border-gray-300 w-16 whitespace-normal break-words">Document Type</th>
                            <th class="py-1 px-2 border-r border-gray-300 w-16 whitespace-normal break-words">Current Revision</th>
                            <th class="py-1 px-2 border-r border-gray-300 w-16 whitespace-normal break-words">Status</th>
                            <th class="py-1 px-2 border-r border-gray-300 w-11 whitespace-normal break-words">View<br>Form</th>
                            <th class="py-1 px-2 border-r border-gray-300 w-11 whitespace-normal break-words">Edit<br>Form</th>
                            <th class="py-1 px-2 border-r border-gray-300 w-11 whitespace-normal break-words">Down<br>Load</th>
                            <th class="py-1 px-2 border-r border-gray-300 w-11 whitespace-normal break-words">Upload</th>
                            <th class="py-1 px-2 border-r border-gray-300 w-11 whitespace-normal break-words">Send for review</th>
                            <th class="py-1 px-2 border-r border-gray-300 w-11 whitespace-normal break-words delete-column" style="display: none;">Delete</th>
                        </tr>
                    </thead>
                    <tbody id="dccListTableBody">
                        <!-- Data rows will go here -->
                    </tbody>
                </table>
            </div>
        </div>
        <style>
            /* Striped rows and hover for tbody */
            table tbody tr {
                background-color: #ffffff;
                transition: background-color 0.2s ease;
            }
            table tbody tr:hover {
                background-color: #f8fafc;
                cursor: pointer;
            }
            table tbody tr {
                border-bottom: 1px solid #d1d5db;
            }
            /* Enhanced separator lines */
            table th {
                border-right: 1px solid #d1d5db;
                border-bottom: 1px solid #d1d5db;
            }
            table td {
                border-right: 1px solid #d1d5db;
                padding: 0.25rem 0.5rem;
                font-size: 0.75rem;
                text-align: center;
            }
        </style>

    <!-- Upload Document Modal -->
    <div id="uploadDocModal" style="display:none; position:fixed; inset:0; background: rgba(0,0,0,0.4); z-index:2000; align-items:center; justify-content:center;">
        <div style="width:90%; max-width:380px; margin:2rem auto; background:#fff; border-radius:12px; box-shadow:0 20px 60px rgba(0,0,0,0.3); overflow:hidden;">
            <div style="display:flex; align-items:center; justify-content:space-between; padding:0.75rem 1.25rem; border-bottom:1px solid #eee; background:#f8fafc;">
                <div style="font-weight:700; font-size:1.1rem; color:#1f2937;">Upload Amended Document</div>
                <button id="uploadDocModalClose" style="color:#6b7280; font-size:1.25rem; padding:0.25rem; border-radius:0.375rem;">&times;</button>
            </div>
            <div style="padding:1rem;">
                <div id="uploadStatusMessage" style="display:none; margin-bottom:0.75rem; padding:0.5rem; border-radius:0.375rem; font-size:0.8rem; font-weight:500;"></div>
                <div style="text-align:center; margin-bottom:1rem;">
                    <div style="width:60px; height:60px; margin:0 auto 0.75rem; background:#f3f4f6; border-radius:50%; display:flex; align-items:center; justify-content:center;">
                        <svg style="width:28px; height:28px; color:#6b7280;" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"></path>
                        </svg>
                    </div>
                    <p style="color:#6b7280; font-size:0.8rem;">Click to select or drag and drop your document</p>
                </div>
                <div id="uploadDropZone" style="border:2px dashed #d1d5db; border-radius:8px; padding:1rem; text-align:center; cursor:pointer; transition:all 0.2s; background:#fafafa;">
                    <input type="file" id="uploadFileInput" style="display:none;" accept=".pdf,.doc,.docx,.xls,.xlsx,.ppt,.pptx,.txt,.jpg,.jpeg,.png,.gif">
                    <div id="uploadFileInfo" style="color:#6b7280;">
                        <svg style="width:32px; height:32px; margin:0 auto 0.5rem; color:#9ca3af;" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path>
                        </svg>
                        <p style="font-weight:500; margin-bottom:0.25rem; font-size:0.85rem;">Choose a file or drag it here</p>
                        <p style="font-size:0.7rem;">Maximum file size: 10MB</p>
                    </div>
                </div>
                <!-- Choice for Word files -->
                <div id="wordFileOptions" style="display:none; margin-top:1rem; padding:0.75rem; background:#f0f9ff; border-radius:8px; border:1px solid #bae6fd;">
                    <p style="font-size:0.8rem; font-weight:600; color:#0369a1; margin-bottom:0.5rem;">Word document detected. How would you like to upload it?</p>
                    <div style="display:flex; gap:0.5rem;">
                        <label style="flex:1; display:flex; align-items:center; gap:0.5rem; background:white; padding:0.5rem; border-radius:6px; cursor:pointer; border:1px solid #e0f2fe; box-shadow: 0 1px 2px rgba(0,0,0,0.05);">
                            <input type="radio" name="uploadFormat" value="word" checked style="cursor:pointer;">
                            <span style="font-size:0.75rem; color:#1e293b;">Keep Word (.docx)</span>
                        </label>
                        <label style="flex:1; display:flex; align-items:center; gap:0.5rem; background:white; padding:0.5rem; border-radius:6px; cursor:pointer; border:1px solid #e0f2fe; box-shadow: 0 1px 2px rgba(0,0,0,0.05);">
                            <input type="radio" name="uploadFormat" value="pdf" style="cursor:pointer;">
                            <span style="font-size:0.75rem; color:#1e293b;">Convert to PDF</span>
                        </label>
                    </div>
                </div>
                <div style="margin-top:0.75rem; display:flex; justify-content:flex-end; gap:0.5rem;">
                    <button id="uploadDocCancel" style="padding:0.3rem 0.6rem; font-size:0.75rem; font-weight:500; color:#374151; background:#f3f4f6; border:1px solid #d1d5db; border-radius:0.375rem;">Cancel</button>
                    <button id="uploadDocConfirm" style="padding:0.3rem 0.6rem; font-size:0.75rem; font-weight:500; color:#ffffff; background:#2563eb; border:1px solid transparent; border-radius:0.375rem;" disabled>Upload</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Scripts -->
    <script type="module" src="../js/dcn-list.js"></script>
</body>
</html>
